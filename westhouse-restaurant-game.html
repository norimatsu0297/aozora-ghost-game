<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Ç¶„Ç®„Çπ„Éà„Éè„Ç¶„Çπ - „É¨„Çπ„Éà„É©„É≥ÁµåÂñ∂„Ç≤„Éº„É†</title>
    <meta name="description" content="„Å§„Åè„Å∞Â∏Ç„ÅÆËÄÅËàóÊ¥ãÈ£ü„É¨„Çπ„Éà„É©„É≥„Äå„Ç¶„Ç®„Çπ„Éà„Éè„Ç¶„Çπ„Äç„Åß„Ç¶„Çß„Ç§„Çø„Éº„Å®„Åó„Å¶ÂÉç„Åè‰ΩìÈ®ì„Ç≤„Éº„É†„ÄÇÂêçÁâ©„ÅÆ„Éá„Éü„Ç∞„É©„Çπ„ÇΩ„Éº„Çπ„Å®„Ç∞„É´„É°„Éê„Éº„Ç¨„Éº„Åß„ÅäÂÆ¢Êßò„ÇíÊ∫ÄË∂≥„Åï„Åõ„Çà„ÅÜÔºÅ">
    <meta name="keywords" content="„Ç¶„Ç®„Çπ„Éà„Éè„Ç¶„Çπ,„É¨„Çπ„Éà„É©„É≥„Ç≤„Éº„É†,ÁµåÂñ∂„Ç≤„Éº„É†,„Å§„Åè„Å∞Â∏Ç,Ê¥ãÈ£ü,„Éá„Éü„Ç∞„É©„Çπ„ÇΩ„Éº„Çπ">
    <meta name="author" content="„Ç¶„Ç®„Çπ„Éà„Éè„Ç¶„ÇπÊú¨Â∫ó">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Yu Gothic Medium', 'Meiryo', sans-serif;
            background: linear-gradient(135deg, #8B4513 0%, #D2691E 100%);
            color: white;
            overflow: hidden;
            user-select: none;
            cursor: default;
        }
        
        #gameContainer {
            width: 100vw;
            height: 100vh;
            position: relative;
        }
        
        #gameArea {
            width: 1000px;
            height: 700px;
            background: linear-gradient(45deg, #F5DEB3 0%, #DEB887 100%);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 4px solid #8B4513;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(139, 69, 19, 0.7);
        }
        
        /* „É¨„Çπ„Éà„É©„É≥„ÅÆËÉåÊôØ */
        .restaurant-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    90deg,
                    transparent,
                    transparent 50px,
                    rgba(139, 69, 19, 0.1) 52px
                ),
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 50px,
                    rgba(139, 69, 19, 0.1) 52px
                );
        }
        
        /* „ÉÜ„Éº„Éñ„É´ */
        .table {
            position: absolute;
            width: 80px;
            height: 80px;
            background: linear-gradient(145deg, #8B4513, #A0522D);
            border-radius: 50%;
            border: 3px solid #654321;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .table::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: linear-gradient(145deg, #DEB887, #D2B48C);
            border-radius: 50%;
            border: 2px solid #CD853F;
        }
        
        /* „ÅäÂÆ¢Êßò */
        .customer {
            position: absolute;
            width: 60px;
            height: 60px;
            background: linear-gradient(145deg, #FFB6C1, #FFA0B4);
            border-radius: 50% 50% 60% 60%;
            border: 3px solid #FF69B4;
            animation: customerWait 2s ease-in-out infinite;
            cursor: pointer;
            z-index: 10;
        }
        
        .customer::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 15px;
            width: 8px;
            height: 8px;
            background: #000;
            border-radius: 50%;
            box-shadow: 20px 0 0 #000;
        }
        
        .customer::after {
            content: '';
            position: absolute;
            top: 25px;
            left: 20px;
            width: 15px;
            height: 8px;
            background: #FF4500;
            border-radius: 0 0 15px 15px;
        }
        
        @keyframes customerWait {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .customer.ordering {
            animation: customerOrdering 0.5s ease-in-out;
            border-color: #32CD32;
        }
        
        @keyframes customerOrdering {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .customer.satisfied {
            border-color: #FFD700;
            animation: customerSatisfied 1s ease-in-out;
        }
        
        @keyframes customerSatisfied {
            0%, 100% { transform: scale(1); }
            25%, 75% { transform: scale(1.1) rotate(5deg); }
            50% { transform: scale(1.15) rotate(-5deg); }
        }
        
        /* ÊñôÁêÜ„Ç¢„Ç§„ÉÜ„É† */
        .food-item {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 8px;
            border: 3px solid #fff;
            cursor: pointer;
            transition: transform 0.2s ease;
            animation: foodSparkle 2s ease-in-out infinite;
        }
        
        .food-item:hover {
            transform: scale(1.1);
        }
        
        @keyframes foodSparkle {
            0%, 100% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
            50% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.8); }
        }
        
        .burger {
            background: linear-gradient(145deg, #D2691E, #CD853F);
        }
        
        .burger::before {
            content: 'üçî';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 30px;
        }
        
        .demiglace {
            background: linear-gradient(145deg, #8B0000, #A0522D);
        }
        
        .demiglace::before {
            content: 'üçñ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 30px;
        }
        
        .coffee {
            background: linear-gradient(145deg, #8B4513, #A0522D);
        }
        
        .coffee::before {
            content: '‚òï';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 30px;
        }
        
        /* „Éó„É¨„Ç§„É§„ÉºÔºà„Ç¶„Çß„Ç§„Çø„ÉºÔºâ */
        #player {
            position: absolute;
            width: 50px;
            height: 70px;
            transition: all 0.3s ease;
            z-index: 15;
            cursor: pointer;
        }
        
        .player-head {
            position: absolute;
            top: 0;
            left: 10px;
            width: 30px;
            height: 30px;
            background: linear-gradient(145deg, #FFDBAC, #E8B895);
            border-radius: 50%;
            border: 2px solid #D4AF37;
        }
        
        .player-body {
            position: absolute;
            top: 25px;
            left: 5px;
            width: 40px;
            height: 40px;
            background: linear-gradient(145deg, #000, #333);
            border-radius: 8px 8px 5px 5px;
        }
        
        .player-apron {
            position: absolute;
            top: 30px;
            left: 8px;
            width: 34px;
            height: 30px;
            background: linear-gradient(145deg, #FFF, #F5F5F5);
            border-radius: 5px;
        }
        
        /* UIË¶ÅÁ¥† */
        #ui {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            background: rgba(139, 69, 19, 0.9);
            padding: 20px;
            border-radius: 15px;
            border: 3px solid #8B4513;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 16px;
        }
        
        #timer {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 100;
            background: rgba(220, 20, 60, 0.9);
            padding: 15px 25px;
            border-radius: 25px;
            border: 3px solid #B22222;
            color: white;
            font-size: 24px;
            font-weight: bold;
        }
        
        #message {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(139, 69, 19, 0.95);
            padding: 20px 30px;
            border-radius: 25px;
            border: 3px solid #8B4513;
            font-size: 18px;
            text-align: center;
            max-width: 800px;
            z-index: 100;
            color: white;
        }
        
        /* „Ç≤„Éº„É†ÈñãÂßãÁîªÈù¢ */
        .start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #8B4513 0%, #D2691E 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 1000;
        }
        
        .start-title {
            font-size: 48px;
            color: #FFD700;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
            margin-bottom: 30px;
            animation: titlePulse 2s ease-in-out infinite;
        }
        
        @keyframes titlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .start-info {
            font-size: 20px;
            color: #FFF;
            text-align: center;
            margin-bottom: 40px;
            line-height: 1.6;
        }
        
        .start-button {
            background: linear-gradient(45deg, #32CD32, #228B22);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 24px;
            border-radius: 30px;
            cursor: pointer;
            transition: transform 0.2s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .start-button:hover {
            transform: scale(1.05);
        }
        
        /* ÁµêÊûúÁîªÈù¢ */
        .result-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 1000;
        }
        
        .result-title {
            font-size: 48px;
            color: #FFD700;
            text-align: center;
            margin-bottom: 30px;
            animation: resultGlow 2s ease-in-out infinite;
        }
        
        @keyframes resultGlow {
            0%, 100% { text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8), 0 0 20px #FFD700; }
            50% { text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8), 0 0 40px #FFD700; }
        }
        
        .result-stats {
            font-size: 24px;
            color: #FFF;
            text-align: center;
            margin-bottom: 30px;
            line-height: 1.8;
        }
        
        .restart-button {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .restart-button:hover {
            transform: scale(1.05);
        }
        
        /* Ê≥®ÊñáÂêπ„ÅçÂá∫„Åó */
        .order-bubble {
            position: absolute;
            background: white;
            color: #333;
            padding: 10px 15px;
            border-radius: 20px;
            border: 2px solid #8B4513;
            font-size: 14px;
            font-weight: bold;
            animation: bubbleFloat 0.5s ease-out;
            z-index: 20;
        }
        
        .order-bubble::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 20px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid white;
        }
        
        @keyframes bubbleFloat {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        /* „É¢„Éê„Ç§„É´ÂØæÂøú„ÅÆ‰ªÆÊÉ≥„Ç≥„É≥„Éà„É≠„Éº„É©„Éº */
        #mobileControls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            z-index: 200;
        }
        
        .control-pad {
            position: relative;
            width: 120px;
            height: 120px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 60px;
            border: 3px solid rgba(255, 255, 255, 0.5);
        }
        
        .control-button {
            position: absolute;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid #8B4513;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #8B4513;
            touch-action: manipulation;
            user-select: none;
        }
        
        .control-button:active {
            background: rgba(255, 255, 255, 1);
            transform: scale(0.9);
        }
        
        .control-up {
            top: 5px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .control-down {
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .control-left {
            left: 5px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .control-right {
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        /* „Çπ„Éû„ÉõÁî®„ÅÆUIË™øÊï¥ */
        @media (max-width: 768px) {
            #mobileControls {
                display: block;
            }
            
            #ui {
                top: 10px;
                left: 10px;
                padding: 15px;
                font-size: 14px;
            }
            
            #timer {
                top: 10px;
                right: 10px;
                padding: 10px 15px;
                font-size: 18px;
            }
            
            #message {
                bottom: 160px;
                padding: 15px 20px;
                font-size: 16px;
                max-width: 90vw;
            }
            
            .start-title {
                font-size: 32px;
            }
            
            .start-info {
                font-size: 16px;
                padding: 0 20px;
            }
            
            .start-button {
                padding: 15px 30px;
                font-size: 20px;
            }
            
            .table {
                width: 60px;
                height: 60px;
            }
            
            .table::after {
                width: 40px;
                height: 40px;
            }
            
            .customer {
                width: 45px;
                height: 45px;
            }
            
            .food-item {
                width: 40px;
                height: 40px;
            }
            
            .food-item::before {
                font-size: 24px;
            }
            
            #player {
                width: 40px;
                height: 55px;
            }
            
            .player-head {
                width: 25px;
                height: 25px;
                left: 7px;
            }
            
            .player-body {
                width: 30px;
                height: 30px;
                top: 20px;
                left: 5px;
            }
            
            .player-apron {
                width: 26px;
                height: 22px;
                top: 23px;
                left: 7px;
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <!-- „Ç≤„Éº„É†ÈñãÂßãÁîªÈù¢ -->
        <div class="start-screen" id="startScreen">
            <div class="start-title">üçî „Ç¶„Ç®„Çπ„Éà„Éè„Ç¶„Çπ üçî</div>
            <div class="start-info">
                „Å§„Åè„Å∞Â∏Ç„Åß42Âπ¥ÊÑõ„Åï„ÇåÁ∂ö„Åë„ÇãËÄÅËàóÊ¥ãÈ£ü„É¨„Çπ„Éà„É©„É≥<br>
                ÂêçÁâ©„ÅÆ5Êó•ÈñìÁÖÆËæº„Çì„Å†„Éá„Éü„Ç∞„É©„Çπ„ÇΩ„Éº„Çπ„Å®<br>
                „Åì„Å†„Çè„Çä„ÅÆ„Ç∞„É´„É°„Éê„Éº„Ç¨„Éº„Åß„ÅäÂÆ¢Êßò„Çí„Åä„ÇÇ„Å¶„Å™„ÅóÔºÅ<br><br>
                <strong>„Ç¶„Çß„Ç§„Çø„Éº„Å®„Åó„Å¶„ÅäÂÆ¢Êßò„Å´ÊñôÁêÜ„ÇíÊèê‰æõ„Åó„Çà„ÅÜÔºÅ</strong>
            </div>
            <button class="start-button" onclick="startGame()">„Ç≤„Éº„É†ÈñãÂßã</button>
        </div>
        
        <div id="gameArea" style="display: none;">
            <div class="restaurant-bg"></div>
            
            <!-- „Éó„É¨„Ç§„É§„ÉºÔºà„Ç¶„Çß„Ç§„Çø„ÉºÔºâ -->
            <div id="player">
                <div class="player-head"></div>
                <div class="player-body"></div>
                <div class="player-apron"></div>
            </div>
            
            <!-- „ÉÜ„Éº„Éñ„É´ -->
            <div class="table" style="top: 100px; left: 150px;"></div>
            <div class="table" style="top: 100px; right: 150px;"></div>
            <div class="table" style="top: 300px; left: 200px;"></div>
            <div class="table" style="top: 300px; right: 200px;"></div>
            <div class="table" style="bottom: 150px; left: 150px;"></div>
            <div class="table" style="bottom: 150px; right: 150px;"></div>
            
            <!-- ÊñôÁêÜ„Ç¢„Ç§„ÉÜ„É†Ôºà„Ç≠„ÉÉ„ÉÅ„É≥„Ç®„É™„Ç¢Ôºâ -->
            <div class="food-item burger" style="bottom: 50px; left: 50px;" data-food="burger"></div>
            <div class="food-item demiglace" style="bottom: 50px; left: 130px;" data-food="demiglace"></div>
            <div class="food-item coffee" style="bottom: 50px; left: 210px;" data-food="coffee"></div>
        </div>
        
        <!-- „É¢„Éê„Ç§„É´Áî®„Ç≥„É≥„Éà„É≠„Éº„É©„Éº -->
        <div id="mobileControls">
            <div class="control-pad">
                <div class="control-button control-up" data-direction="w">‚Üë</div>
                <div class="control-button control-down" data-direction="s">‚Üì</div>
                <div class="control-button control-left" data-direction="a">‚Üê</div>
                <div class="control-button control-right" data-direction="d">‚Üí</div>
            </div>
        </div>
        
        <!-- UI -->
        <div id="ui" style="display: none;">
            <div>Â£≤‰∏ä: ¬•<span id="sales">0</span></div>
            <div>Ê∫ÄË∂≥Â∫¶: <span id="satisfaction">100</span>%</div>
            <div>Êèê‰æõÊï∞: <span id="served">0</span>ÂìÅ</div>
        </div>
        
        <div id="timer" style="display: none;">
            ÊôÇÈñì: <span id="timeLeft">60</span>Áßí
        </div>
        
        <div id="message" style="display: none;">
            <span class="desktop-message">WASD„Ç≠„Éº„ÅßÁßªÂãï„ÄÅÊñôÁêÜ„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ÊåÅ„Å°„ÄÅ„ÅäÂÆ¢Êßò„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶Êèê‰æõÔºÅ</span>
            <span class="mobile-message" style="display: none;">‰∏ã„ÅÆ„Éú„Çø„É≥„ÅßÁßªÂãï„ÄÅÊñôÁêÜ„Çí„Çø„ÉÉ„Éó„Åó„Å¶ÊåÅ„Å°„ÄÅ„ÅäÂÆ¢Êßò„Çí„Çø„ÉÉ„Éó„Åó„Å¶Êèê‰æõÔºÅ</span>
        </div>
        
        <!-- ÁµêÊûúÁîªÈù¢ -->
        <div class="result-screen" id="resultScreen">
            <div class="result-title">üéâ „ÅäÁñ≤„ÇåÊßò„Åß„Åó„ÅüÔºÅ üéâ</div>
            <div class="result-stats" id="resultStats">
                Â£≤‰∏ä: ¬•0<br>
                Ê∫ÄË∂≥Â∫¶: 100%<br>
                Êèê‰æõÊï∞: 0ÂìÅ
            </div>
            <button class="restart-button" onclick="location.reload()">„ÇÇ„ÅÜ‰∏ÄÂ∫¶„Éó„É¨„Ç§</button>
        </div>
    </div>

    <script>
        const player = document.getElementById('player');
        const gameArea = document.getElementById('gameArea');
        const startScreen = document.getElementById('startScreen');
        const resultScreen = document.getElementById('resultScreen');
        const ui = document.getElementById('ui');
        const timer = document.getElementById('timer');
        const message = document.getElementById('message');
        
        let playerX = 500;
        let playerY = 400;
        let sales = 0;
        let satisfaction = 100;
        let served = 0;
        let timeLeft = 60;
        let gameRunning = false;
        let customers = [];
        let heldFood = null;
        let gameTimer;
        let customerSpawnTimer;
        let isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        // „Éó„É¨„Ç§„É§„Éº„ÅÆÂàùÊúü‰ΩçÁΩÆË®≠ÂÆö
        player.style.left = playerX + 'px';
        player.style.top = playerY + 'px';
        
        // „Ç≤„Éº„É†ÈñãÂßã
        function startGame() {
            startScreen.style.display = 'none';
            gameArea.style.display = 'block';
            ui.style.display = 'block';
            timer.style.display = 'block';
            message.style.display = 'block';
            
            // „É¢„Éê„Ç§„É´ÂØæÂøú„É°„ÉÉ„Çª„Éº„Ç∏Ë°®Á§∫
            if (isMobile) {
                document.querySelector('.desktop-message').style.display = 'none';
                document.querySelector('.mobile-message').style.display = 'inline';
            }
            
            gameRunning = true;
            spawnCustomer();
            
            // „Ç≤„Éº„É†„Çø„Ç§„Éû„Éº
            gameTimer = setInterval(() => {
                timeLeft--;
                document.getElementById('timeLeft').textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
            
            // „ÅäÂÆ¢ÊßòÁîüÊàê„Çø„Ç§„Éû„Éº
            customerSpawnTimer = setInterval(() => {
                if (customers.length < 4) {
                    spawnCustomer();
                }
            }, 8000);
        }
        
        // „Ç≠„Éº„Éú„Éº„ÉâÊìç‰ΩúÔºàWASDÔºâ
        document.addEventListener('keydown', (e) => {
            if (!gameRunning) return;
            movePlayer(e.key.toLowerCase());
        });
        
        // „Éó„É¨„Ç§„É§„ÉºÁßªÂãïÈñ¢Êï∞
        function movePlayer(direction) {
            if (!gameRunning) return;
            
            const gameAreaRect = gameArea.getBoundingClientRect();
            const speed = isMobile ? 6 : 8;
            const maxX = gameAreaRect.width - 50;
            const maxY = gameAreaRect.height - 70;
            
            let newX = playerX;
            let newY = playerY;
            
            switch(direction) {
                case 'a':
                    newX = Math.max(25, playerX - speed);
                    break;
                case 'd':
                    newX = Math.min(maxX - 25, playerX + speed);
                    break;
                case 'w':
                    newY = Math.max(25, playerY - speed);
                    break;
                case 's':
                    newY = Math.min(maxY - 25, playerY + speed);
                    break;
            }
            
            if (newX !== playerX || newY !== playerY) {
                playerX = newX;
                playerY = newY;
                player.style.left = playerX + 'px';
                player.style.top = playerY + 'px';
            }
        }
        
        // „É¢„Éê„Ç§„É´„Ç≥„É≥„Éà„É≠„Éº„É©„Éº
        document.querySelectorAll('.control-button').forEach(button => {
            let moveInterval;
            
            function startMove() {
                const direction = button.dataset.direction;
                movePlayer(direction);
                moveInterval = setInterval(() => {
                    movePlayer(direction);
                }, 50);
            }
            
            function stopMove() {
                if (moveInterval) {
                    clearInterval(moveInterval);
                    moveInterval = null;
                }
            }
            
            // „Çø„ÉÉ„ÉÅ„Ç§„Éô„É≥„Éà
            button.addEventListener('touchstart', (e) => {
                e.preventDefault();
                startMove();
            });
            
            button.addEventListener('touchend', (e) => {
                e.preventDefault();
                stopMove();
            });
            
            // „Éû„Ç¶„Çπ„Ç§„Éô„É≥„ÉàÔºà„Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„Åß„ÅÆ„ÉÜ„Çπ„ÉàÁî®Ôºâ
            button.addEventListener('mousedown', startMove);
            button.addEventListener('mouseup', stopMove);
            button.addEventListener('mouseleave', stopMove);
        });
        
        // „ÅäÂÆ¢ÊßòÁîüÊàê
        function spawnCustomer() {
            const tables = document.querySelectorAll('.table');
            const availableTables = Array.from(tables).filter(table => {
                return !customers.some(customer => customer.table === table);
            });
            
            if (availableTables.length === 0) return;
            
            const randomTable = availableTables[Math.floor(Math.random() * availableTables.length)];
            const tableRect = randomTable.getBoundingClientRect();
            const gameAreaRect = gameArea.getBoundingClientRect();
            
            const customer = document.createElement('div');
            customer.className = 'customer';
            customer.style.left = (tableRect.left - gameAreaRect.left + 10) + 'px';
            customer.style.top = (tableRect.top - gameAreaRect.top + 10) + 'px';
            
            const foods = ['burger', 'demiglace', 'coffee'];
            const wantedFood = foods[Math.floor(Math.random() * foods.length)];
            
            const customerData = {
                element: customer,
                table: randomTable,
                wantedFood: wantedFood,
                patience: 100,
                served: false
            };
            
            customers.push(customerData);
            gameArea.appendChild(customer);
            
            // Ê≥®Êñá„ÅÆÂêπ„ÅçÂá∫„ÅóË°®Á§∫
            showOrderBubble(customer, wantedFood);
            
            // „ÅäÂÆ¢Êßò„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ÊñôÁêÜÊèê‰æõ
            customer.addEventListener('click', () => serveCustomer(customerData));
            
            // ÂæÖÊ©üÊôÇÈñì„Å´„Çà„Çã„Çπ„Éà„É¨„ÇπÂ¢óÂä†
            const patienceTimer = setInterval(() => {
                if (customerData.served) {
                    clearInterval(patienceTimer);
                    return;
                }
                
                customerData.patience -= 2;
                if (customerData.patience <= 0) {
                    removeCustomer(customerData);
                    satisfaction = Math.max(0, satisfaction - 10);
                    updateUI();
                    clearInterval(patienceTimer);
                }
            }, 1000);
        }
        
        // Ê≥®ÊñáÂêπ„ÅçÂá∫„ÅóË°®Á§∫
        function showOrderBubble(customer, food) {
            const bubble = document.createElement('div');
            bubble.className = 'order-bubble';
            
            const foodNames = {
                burger: '„Ç∞„É´„É°„Éê„Éº„Ç¨„Éº',
                demiglace: '„Éá„Éü„Ç∞„É©„Çπ„ÇΩ„Éº„Çπ',
                coffee: '„Ç≥„Éº„Éí„Éº'
            };
            
            bubble.textContent = foodNames[food];
            bubble.style.left = '10px';
            bubble.style.top = '-40px';
            customer.appendChild(bubble);
            
            setTimeout(() => {
                if (bubble.parentNode) {
                    bubble.parentNode.removeChild(bubble);
                }
            }, 5000);
        }
        
        // ÊñôÁêÜ„Ç¢„Ç§„ÉÜ„É†„ÇØ„É™„ÉÉ„ÇØ
        document.querySelectorAll('.food-item').forEach(item => {
            item.addEventListener('click', () => {
                if (!gameRunning) return;
                
                const foodType = item.dataset.food;
                heldFood = foodType;
                
                // Ë¶ñË¶öÁöÑ„Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØ
                item.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    item.style.transform = 'scale(1)';
                }, 200);
                
                showMessage(`${getFoodName(foodType)}„ÇíÊåÅ„Å°„Åæ„Åó„ÅüÔºÅ„ÅäÂÆ¢Êßò„ÅÆ„Å®„Åì„Çç„Å∏Â±ä„Åë„Åæ„Åó„Çá„ÅÜ„ÄÇ`);
            });
        });
        
        // „ÅäÂÆ¢Êßò„Å´ÊñôÁêÜÊèê‰æõ
        function serveCustomer(customerData) {
            if (!gameRunning || !heldFood || customerData.served) return;
            
            const distance = Math.sqrt(
                Math.pow(playerX - (parseInt(customerData.element.style.left) + 30), 2) +
                Math.pow(playerY - (parseInt(customerData.element.style.top) + 30), 2)
            );
            
            if (distance > 100) {
                showMessage('„ÅäÂÆ¢Êßò„Å´Ëøë„Å•„ÅÑ„Å¶„Åã„ÇâÊñôÁêÜ„ÇíÊèê‰æõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            customerData.element.classList.add('ordering');
            
            if (heldFood === customerData.wantedFood) {
                // Ê≠£„Åó„ÅÑÊñôÁêÜ
                customerData.element.classList.add('satisfied');
                const prices = { burger: 1200, demiglace: 1800, coffee: 500 };
                sales += prices[heldFood];
                served++;
                satisfaction = Math.min(100, satisfaction + 5);
                
                showMessage(`${getFoodName(heldFood)}„Çí„ÅäÂ±ä„Åë„Åó„Åæ„Åó„ÅüÔºÅ„ÅäÂÆ¢Êßò„Å´Âñú„Çì„Åß„ÅÑ„Åü„Å†„Åë„Åæ„Åó„Åü„ÄÇ`);
                
                setTimeout(() => removeCustomer(customerData), 2000);
            } else {
                // ÈñìÈÅï„Å£„ÅüÊñôÁêÜ
                satisfaction = Math.max(0, satisfaction - 15);
                showMessage(`Ê≥®Êñá„Å®ÈÅï„ÅÜÊñôÁêÜ„Åß„Åô„ÄÇ„ÅäÂÆ¢Êßò„ÅåÂõ∞„Å£„Å¶„ÅÑ„Åæ„Åô...`);
                
                setTimeout(() => removeCustomer(customerData), 3000);
            }
            
            heldFood = null;
            updateUI();
        }
        
        // „ÅäÂÆ¢Êßò„ÇíÂâäÈô§
        function removeCustomer(customerData) {
            const index = customers.indexOf(customerData);
            if (index > -1) {
                customers.splice(index, 1);
                if (customerData.element.parentNode) {
                    gameArea.removeChild(customerData.element);
                }
            }
        }
        
        // UIÊõ¥Êñ∞
        function updateUI() {
            document.getElementById('sales').textContent = sales;
            document.getElementById('satisfaction').textContent = satisfaction;
            document.getElementById('served').textContent = served;
        }
        
        // „É°„ÉÉ„Çª„Éº„Ç∏Ë°®Á§∫
        function showMessage(text) {
            message.textContent = text;
            setTimeout(() => {
                if (message.textContent === text) {
                    if (isMobile) {
                        document.querySelector('.desktop-message').style.display = 'none';
                        document.querySelector('.mobile-message').style.display = 'inline';
                        message.innerHTML = '<span class="mobile-message">‰∏ã„ÅÆ„Éú„Çø„É≥„ÅßÁßªÂãï„ÄÅÊñôÁêÜ„Çí„Çø„ÉÉ„Éó„Åó„Å¶ÊåÅ„Å°„ÄÅ„ÅäÂÆ¢Êßò„Çí„Çø„ÉÉ„Éó„Åó„Å¶Êèê‰æõÔºÅ</span>';
                    } else {
                        message.textContent = 'WASD„Ç≠„Éº„ÅßÁßªÂãï„ÄÅÊñôÁêÜ„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ÊåÅ„Å°„ÄÅ„ÅäÂÆ¢Êßò„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶Êèê‰æõÔºÅ';
                    }
                }
            }, 3000);
        }
        
        // ÊñôÁêÜÂêçÂèñÂæó
        function getFoodName(food) {
            const names = {
                burger: '„Ç∞„É´„É°„Éê„Éº„Ç¨„Éº',
                demiglace: '„Éá„Éü„Ç∞„É©„Çπ„ÇΩ„Éº„Çπ',
                coffee: '„Ç≥„Éº„Éí„Éº'
            };
            return names[food] || food;
        }
        
        // „Ç≤„Éº„É†ÁµÇ‰∫Ü
        function endGame() {
            gameRunning = false;
            clearInterval(gameTimer);
            clearInterval(customerSpawnTimer);
            
            // Ë©ï‰æ°Ë®àÁÆó
            let grade = 'D';
            if (satisfaction >= 90 && sales >= 5000) grade = 'S';
            else if (satisfaction >= 80 && sales >= 3000) grade = 'A';
            else if (satisfaction >= 70 && sales >= 2000) grade = 'B';
            else if (satisfaction >= 60 && sales >= 1000) grade = 'C';
            
            document.getElementById('resultStats').innerHTML = `
                Â£≤‰∏ä: ¬•${sales}<br>
                Ê∫ÄË∂≥Â∫¶: ${satisfaction}%<br>
                Êèê‰æõÊï∞: ${served}ÂìÅ<br>
                Ë©ï‰æ°: ${grade}„É©„É≥„ÇØ
            `;
            
            resultScreen.style.display = 'flex';
        }
        
        // ÂàùÊúü„É°„ÉÉ„Çª„Éº„Ç∏Ë®≠ÂÆö
        setTimeout(() => {
            if (gameRunning) {
                showMessage('');
            }
        }, 5000);
    </script>
</body>
</html>